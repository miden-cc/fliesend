# fließend - 使い方

**Version:** 0.1.0 (Phase 3 完了)
**最終更新:** 2025-11-01

---

## 概要

fließendは、**フォルダ構造をアウトライナーのように編集できるツール**です。
アウトライナーを編集する感覚で、実際のファイルシステムが整理されます。

---

## インストールと起動

### 1. 依存関係のインストール

```bash
npm install
```

> **注意:** Electronのダウンロードに時間がかかる場合があります。

### 2. アプリケーションの起動

#### 開発モード（推奨）
```bash
npm run dev
```

- 開発者ツールが自動的に開きます
- ホットリロードが有効になります
- コードの変更が即座に反映されます

#### 通常モード
```bash
npm start
```

---

## 基本的な使い方

### Step 1: フォルダを開く

1. アプリを起動すると、「フォルダを開く」ボタンが表示されます
2. ボタンをクリックして、整理したいフォルダを選択
3. フォルダツリーが読み込まれ、階層的に表示されます

### Step 2: ツリーを閲覧する

- **マウスクリック**: ノードを選択
- **↑/↓キー**: ノード間を移動
- **←/→キー**: フォルダを折りたたみ/展開
- **Spaceキー**: フォルダを開閉

### Step 3: フォルダ構造を編集する（核心機能！）

選択したノード（フォルダまたはファイル）を階層的に移動できます：

#### Tab: ノードを一段階下げる
```
Before:
  フォルダA/
  フォルダB/

After (フォルダBを選択してTab):
  フォルダA/
    フォルダB/  ← フォルダAの中に移動
```

#### Shift+Tab: ノードを一段階上げる
```
Before:
  フォルダA/
    フォルダB/

After (フォルダBを選択してShift+Tab):
  フォルダA/
  フォルダB/  ← フォルダAと同じレベルに移動
```

> **重要:** これらの操作は**実際のファイルシステムに即座に反映**されます！

---

## キーボードショートカット

| キー | 動作 | 実装状況 |
|------|------|----------|
| **ナビゲーション** |
| `↑` | 前のノードへ移動 | ✅ 実装済み |
| `↓` | 次のノードへ移動 | ✅ 実装済み |
| `←` | フォルダを折りたたむ | ✅ 実装済み |
| `→` | フォルダを展開 | ✅ 実装済み |
| `Space` | フォルダを開閉 | ✅ 実装済み |
| **階層変更（コア機能）** |
| `Tab` | ノードを一段階下げる | ✅ 実装済み |
| `Shift+Tab` | ノードを一段階上げる | ✅ 実装済み |
| **その他（未実装）** |
| `Enter` | ノード名編集 | ⏳ Phase 4 |
| `Cmd+N` / `Ctrl+N` | 新規ノード作成 | ⏳ Phase 4 |
| `Delete` | ノード削除 | ⏳ Phase 4 |

---

## 現在の実装状況

### ✅ 実装済み機能（Phase 1-3）

#### Phase 1: 基本表示機能
- ✅ フォルダ選択ダイアログ
- ✅ フォルダツリーの再帰的読み込み
- ✅ 階層インデント表示
- ✅ フォルダ/ファイルの区別

#### Phase 2: インタラクション機能
- ✅ フォルダの開閉（クリック・Spaceキー）
- ✅ 展開インジケーター（`>` と `∨`）
- ✅ アイテム選択ハイライト
- ✅ キーボードナビゲーション（↑↓←→キー）

#### Phase 3: コア機能 - 階層変更
- ✅ Tab/Shift+Tab による階層変更
- ✅ ファイルシステムへの即座の反映
- ✅ エラーハンドリング
  - 権限エラー
  - 同名ファイル/フォルダの検出
  - 使用中ファイルの検出

### ⏳ 未実装機能（Phase 4以降）

- ⏳ ノード追加（新規フォルダ/ファイル作成）
- ⏳ ノード削除
- ⏳ ノード名変更（リネーム）
- ⏳ Markdown展開表示
- ⏳ メタデータ機能
- ⏳ ドラッグ&ドロップ
- ⏳ 検索機能

---

## 使用例

### 例1: プロジェクトフォルダの整理

```
整理前:
  project/
    古いメモ.txt
    重要な資料/
    メモ.txt
    作業中/

整理後（古いメモ.txtを選択してTabキー）:
  project/
    重要な資料/
    メモ.txt
    作業中/
      古いメモ.txt  ← 作業中フォルダに移動
```

### 例2: フォルダ階層の調整

```
整理前:
  ドキュメント/
    2024/
      プロジェクトA/
        資料/
          重要資料.pdf

整理後（重要資料.pdfを3回Shift+Tab）:
  ドキュメント/
    2024/
      プロジェクトA/
        資料/
    重要資料.pdf  ← 2024フォルダ直下に移動
```

---

## エラーメッセージとその対処法

### 「これ以上下げられません（最初のアイテムです）」
- **原因:** Tabキーで階層を下げようとしましたが、前に兄弟ノードが存在しません
- **対処:** 別のノードを選択するか、Shift+Tabで階層を上げてください

### 「前のアイテムがフォルダではないため移動できません」
- **原因:** Tabキーで階層を下げようとしましたが、前の兄弟がファイルです
- **対処:** フォルダの後ろのノードを選択してください

### 「これ以上上げられません（ルートレベルです）」
- **原因:** Shift+Tabで階層を上げようとしましたが、既にルートレベルです
- **対処:** Tabキーで階層を下げるか、別の操作を試してください

### 「同名のファイル/フォルダが既に存在します」
- **原因:** 移動先に同じ名前のファイル/フォルダが既に存在します
- **対処:** 先にファイル名を変更するか、別の場所に移動してください（名前変更機能は未実装）

### 「ファイル操作の権限がありません」
- **原因:** システムフォルダや読み取り専用フォルダを操作しようとしました
- **対処:** 権限のあるフォルダを選択してください

---

## トラブルシューティング

### アプリが起動しない

```bash
# 依存関係を再インストール
rm -rf node_modules
npm install

# 再起動
npm run dev
```

### ツリーが表示されない

1. フォルダの権限を確認してください
2. 隠しファイル（`.`で始まるもの）は自動的にスキップされます
3. 階層の深さは10階層までです

### 移動が反映されない

1. ファイルが他のアプリケーションで開かれていないか確認
2. ディスク容量が十分にあるか確認
3. ファイルシステムの権限を確認

---

## 開発者向け情報

### プロジェクト構造

```
fliesend/
├── src/
│   ├── main.js          # Electronメインプロセス
│   └── preload.js       # セキュアなAPI提供
├── public/
│   ├── index.html       # UI
│   ├── renderer.js      # レンダラープロセス
│   └── styles.css       # スタイル
├── package.json
├── requirements.md      # 要件定義書
├── design.md            # システム設計書
├── Specification.md     # プロジェクト仕様書
└── TODO.md              # 開発タスク
```

### デバッグ

開発モード（`npm run dev`）で起動すると、開発者ツールが自動的に開きます。

- **メインプロセスのログ:** ターミナルに表示
- **レンダラープロセスのログ:** 開発者ツールのコンソールに表示

---

## 既知の制限事項

### 現在の制限

1. **シンボリックリンク:** 未対応
2. **大量ファイル:** 1,000ファイル以上でパフォーマンス低下の可能性
3. **ファイル名の制限:** OS固有の制限に従います
4. **Undo/Redo:** 未実装（エラー時のロールバックのみ）
5. **クラウド同期:** 未対応

### セキュリティ上の注意

- **システムフォルダを選択しないでください** (`/System`, `/Applications`, `C:\Windows`等)
- **重要なファイルのバックアップを取ってからテストしてください**
- **最初はテスト用の空フォルダで試すことを推奨します**

---

## テスト用フォルダの作成

安全にテストするため、以下のコマンドでテスト用フォルダを作成できます：

```bash
# テストフォルダの作成
mkdir -p ~/fliesend-test/{プロジェクトA,プロジェクトB,ドキュメント}
mkdir -p ~/fliesend-test/プロジェクトA/{資料,コード}
mkdir -p ~/fliesend-test/プロジェクトB/{画像,メモ}

# サンプルファイルの作成
touch ~/fliesend-test/README.txt
touch ~/fliesend-test/プロジェクトA/資料/仕様書.md
touch ~/fliesend-test/プロジェクトA/コード/main.js
touch ~/fliesend-test/プロジェクトB/メモ/TODO.txt

echo "テストフォルダを作成しました: ~/fliesend-test"
```

このフォルダをfließendで開いて、Tab/Shift+Tabでフォルダ構造を自由に編集してみてください！

---

## フィードバック・バグ報告

問題が発生した場合は、以下の情報を添えて報告してください：

1. OS とバージョン
2. Node.js とバージョン (`node --version`)
3. 実行したコマンド
4. エラーメッセージ
5. 再現手順

---

## 次のバージョンで予定されている機能

### Phase 4（次の実装予定）
- ノード追加（Cmd+N / Ctrl+N）
- ノード削除（Delete）
- ノード名変更（Enter）

### Phase 5以降
- UI/UXの洗練
- パフォーマンス最適化
- Markdown展開表示
- ファイル監視（外部変更の自動反映）

---

**楽しんでフォルダを整理してください！**

流れるように、思考とファイルの境界を溶かす。
