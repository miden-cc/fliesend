# fließend - 開発ガイド

## 環境構築

### 必要な環境

- **Node.js**: v18.x 以上
- **npm**: v9.x 以上
- **OS**: macOS / Windows / Linux

### 初期セットアップ

1. **依存関係のインストール**

```bash
npm install
```

2. **開発モードで起動**

```bash
npm run dev
```

開発者ツールが自動的に開き、ホットリロードが有効になります。

3. **通常モードで起動**

```bash
npm start
```

## プロジェクト構造

```
fliesend/
├── src/
│   ├── main.js          # メインプロセス（Electronのエントリーポイント）
│   └── preload.js       # プリロードスクリプト（セキュアなAPI提供）
├── public/
│   ├── index.html       # UIのHTML
│   ├── styles.css       # スタイルシート
│   └── renderer.js      # レンダラープロセスのロジック
├── package.json         # プロジェクト設定
└── README.md            # プロジェクト概要
```

## 開発の流れ

### Phase 0: 環境セットアップ ✓

- [x] Electronプロジェクトの初期化
- [x] 基本的なファイル構造の作成
- [x] 開発環境の整備（ホットリロード設定）
- [x] 基本UIの実装

### Phase 1: 基本表示機能 ✓

- [x] フォルダ選択ダイアログの実装
- [x] フォルダツリーの読み込み
- [x] ツリーの表示

### Phase 2: インタラクション ✓

- [x] アイテム選択のハイライト
- [x] キーボードナビゲーション（↑↓←→）
- [x] Enter/Spaceでフォルダ開閉
- [x] ファイルダブルクリックで外部エディタで開く

### Phase 3: コア機能 - 階層変更 ✓

- [x] Tab/Shift+Tabキーバインド
- [x] Tab: 階層を下げる（インデント増やす）
- [x] Shift+Tab: 階層を上げる（インデント減らす）
- [x] UIの即座の更新

### Phase 4: ファイルシステム反映 ✓

- [x] ファイル/フォルダの移動実装
- [x] エラーハンドリング
- [x] 同名衝突チェック

### Phase 5: UI/UX洗練（進行中）

- [x] 基本的なスタイリング
- [x] ローディング状態の表示
- [x] 基本的なフィードバック（ステータスバー）

## トラブルシューティング

### Electronのインストールに失敗する場合

環境によってはElectronのダウンロードに制限がある場合があります。

**解決策1: プロキシ設定**
```bash
npm config set proxy http://your-proxy:port
npm config set https-proxy http://your-proxy:port
```

**解決策2: 別のレジストリを使用**
```bash
npm config set registry https://registry.npmmirror.com
npm install
```

**解決策3: Electronをグローバルにインストール**
```bash
npm install -g electron@27.0.0
```

### ホットリロードが動作しない場合

`electron-reload`のインストールに失敗している可能性があります。
一度アプリを閉じて、再度`npm run dev`で起動してください。

## 開発Tips

### デバッグ

- **開発者ツール**: `npm run dev`で自動的に開きます
- **コンソールログ**: メインプロセスのログはターミナルに表示されます
- **レンダラープロセスのログ**: 開発者ツールのコンソールに表示されます

### コードの変更

- `src/main.js`: メインプロセスのコードを変更した場合、アプリの再起動が必要です
- `public/*`: UI関連のファイルを変更した場合、ホットリロードで自動的に反映されます

## 次のステップ

Phase 0-4が完了し、fließendのコア機能が動作しています！

**現在実装済みの機能:**
- フォルダツリーの表示と編集
- Tab/Shift+Tabでの階層変更（コア機能）
- ファイルシステムへの即座の反映
- キーボードナビゲーション
- ファイルを外部エディタで開く

**今後の拡張予定（Phase 5+）:**
- ファイル/フォルダの新規作成・削除・リネーム
- ドラッグ&ドロップ対応
- 検索機能
- メタデータ管理（.outline-meta/）
- パフォーマンス最適化（大量ファイル対応）

詳細は`TODO.md`を参照してください。
